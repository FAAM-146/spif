# Example spif definition file
# Use with SPIF vocal project to create/check netCDF files
# see;
#    https://github.com/FAAM-146/spif
meta:
  file_pattern: spif_example.nc
  short_name: spif
  canonical_name: A SPIF example dataset
  description: >-
    Provides a minimal example of a SPIF dataset including mandatory
    requirements only.
  references:
    - ['SPIF standard', 'https://github.com/FAAM-146/spif']
    - ['Example dataset documentation', 'https://some.url/']

# Global attributes
attributes:
  Conventions: SPIF-1.0

# No variables or dimensions are required in the root group
variables: []
dimensions: []

# Top-level instrument group
groups:
  - meta:
      name: instrument_1_group

    # Required instrument group attributes
    attributes:
      instrument_name: instrument_1
      instrument_long_name: instrument_1 with a more descriptive name
    
      # Required instrument group dimensions
    dimensions:
      - name: array_dimensions
        size: 2
      - name: pixel_colors
        size: 3
    
    # instrument group mandatory variables
    variables:
      - meta:
          name: color_level
          datatype: <float32>
          required: true
        dimensions: ['pixel_colors']
        attributes:
          attribute1: Testing a variable attribute not in the SPIF spec
      
      - meta:
          name: array_size
          datatype: <int32>
          required: true
        dimensions: ['array_dimensions']
        attributes: {}
      
      - meta:
          name: image_size
          datatype: <int32>
          required: true
        dimensions: ['array_dimensions']
        attributes: {}
      
      - meta:
          name: resolution
          datatype: <float32>
          required: true
        dimensions: ['array_dimensions']
        attributes: {}
      
      - meta:
          name: wavelength
          datatype: <float32>
          required: true
        dimensions: []
        attributes: {}
      
      - meta:
          name: pathlength
          datatype: <float32>
          required: true
        dimensions: []
        attributes: {}


    groups:
    # instrument_1/core group is required.
      - meta:
          name: core
        
        # No instrument_1/core mandatory attributes
        attributes: {}
        
        # instrument_1/core group dimensions. Both are UNLIMITED
        dimensions:
          - name: image_num
            size: null
          - name: pixel
            size: null

        # Required instrument_1/core group variables
        variables:
        
          - meta:
              name: image
              datatype: <uint8>
              required: true
            dimensions: ['pixel']
            attributes: {}

          - meta:
              name: timestamp
              datatype: <uint64>
              required: true
            dimensions: ['image_num']
            attributes:
              attribute1: testing a variable attribute not in the SPIF spec
              standard_name: time
              units: '<str: derived_from_file>'

          - meta:
              name: startpixel
              datatype: <uint32>
              required: true
            dimensions: ['image_num']
            attributes: {}

          - meta:
              name: width
              datatype: <uint8>
              required: true
            dimensions: ['image_num']
            attributes: {}

          - meta:
              name: height
              datatype: <uint8>
              required: true
            dimensions: ['image_num']
            attributes: {}

          - meta:
              name: overload
              datatype: <byte>
              required: true
            dimensions: ['image_num']
            attributes: {}
